<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Додати відгук</title>
    <link rel="stylesheet" th:href="@{/css/add-review.css}" type="text/css">
</head>
<body>
<div class="review-container">
    <div th:if="${currentRole == 'ROLE_CLIENT'}">
        <h1>Додати відгук для закладу <span th:text="${institution.title}">Назва закладу</span></h1>

        <form action="/api/v1/apps/reviews/add" method="post" class="review-form">
            <input type="hidden" name="institution.id" th:value="${institution.id}" />
            <input type="hidden" name="user.id" th:value="${user}" />

            <label for="starsFood">Оцінка їжі:</label>
            <input type="number" id="starsFood" name="starsFood" min="1" max="5" step="0.5" required /><br/>

            <label for="starsService">Оцінка сервісу:</label>
            <input type="number" id="starsService" name="starsService" min="1" max="5" step="0.5" required /><br/>
            <label for="starsAtmosphere">Оцінка атмосфери:</label>
            <input type="number" id="starsAtmosphere" name="starsAtmosphere" min="1" max="5" step="0.5" required /><br/>

            <label for="description">Коментар:</label><br/>
            <textarea id="description" name="description" required></textarea><br/>

            <button type="submit">Надіслати відгук</button>
        </form>
    </div>

    <div th:unless="${currentRole == 'ROLE_CLIENT'}">
        <h1>Відгуки закладу <span th:text="${institution.title}">Назва закладу</span></h1>
    </div>

    <div th:if="${reviews != null}">
        <table>
            <thead>
            <tr>
                <th>ID</th>
                <th>Дата створення</th>
                <th>Автор</th>
                <th>Оцінка їжі</th>
                <th>Оцінка сервісу</th>
                <th>Оцінка атмосфери</th>
                <th>Опис</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="review : ${reviews}">
                <td th:text="${review.id}"></td>
                <td th:text="${#temporals.format(review.dateOfCreation, 'yyyy-MM-dd HH:mm')}"></td>
                <td th:text="${review.user.firstName} + ' ' + ${review.user.lastName}"></td>
                <td th:text="${review.starsFood}"></td>
                <td th:text="${review.starsService}"></td>
                <td th:text="${review.starsAtmosphere}"></td>
                <td th:text="${review.description}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>